<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Menu</title>
  <link rel="stylesheet" href="/css/Menu.css">
</head>
<body>
  <div class="contenedor">
    <section class="nav-bar">
      <img loading="lazy" src="img/BCL MGM.png" class="BCL_MGM" height="80px" />
      <div class="bienvenido">
        <h1>Bienvenido, <span id="username"></span></h1>
      </div>
    </section>
    <section class="contenedor2">
      <div class="menu-icon">â˜°</div>
      <nav class="menu">
        <button class="home bg">Home</button>
        <button class="reportes">Reportes</button>
        <button class="herramientas">Herramientas</button>
      </nav>
      <div id="container-todo" class="container-todo">
        <div class="container-categoria">
          <div class="cuadros" onclick="location.href='I+D.html';">
            <img class="icono" loading="lazy" src="img/i+d.png" draggable="false"/>
          </div>
          <div class="titulo">I + D</div>
        </div>
        <div class="container-categoria">
          <div class="cuadros" onclick="location.href='Mkt.html';">
            <img class="icono" loading="lazy" src="img/mkt.png" draggable="false" height="95px"/>
          </div>
          <div class="titulo">MKT</div>
        </div>
        <div class="container-categoria">
          <div class="cuadros" onclick="location.href='Ops.html';">
            <img class="icono" loading="lazy" src="img/ops.png" draggable="false"/>
          </div>
          <div class="titulo">OPS</div>
        </div>
        <div class="container-categoria">
          <div class="cuadros" onclick="location.href='RH+DO.html';">
            <img class="icono" loading="lazy" src="img/rh+do.png" draggable="false"/>
          </div>
          <div class="titulo">RH + DO</div>
        </div>
        <div class="container-categoria">
          <div class="cuadros" onclick="location.href='Ventas.html';">
            <img class="icono" loading="lazy" src="img/ventas.png" draggable="false"/>
          </div>
          <div class="titulo">VENTAS</div>
        </div>
        <div class="container-categoria">
          <div class="cuadros" onclick="location.href='TradeMkt.html';">
            <img class="icono" loading="lazy" src="img/tradeMkt.png" draggable="false"/>
          </div>
          <div class="titulo">TRADE MKT</div>
        </div>
        <div class="container-categoria">
          <div class="cuadros" onclick="location.href='Finanzas.html';">
            <img class="icono" loading="lazy" src="img/finanzas.png" draggable="false"/>
          </div>
          <div class="titulo">FINANZAS</div>
        </div>
        <div class="container-categoria">
          <div class="cuadros" onclick="location.href='Fiscal.html';">
            <img class="icono" loading="lazy" src="img/fiscal.png" draggable="false"/>
          </div>
          <div class="titulo">FISCAL</div>
        </div>
      </div>
      <div id="container-todo2" class="container-todo2" style="display: none;">
        <!-- Reportes -->
        <div class="container-categoria" id="linkCalculadora">
          <div class="cuadros">
            <img class="icono" loading="lazy" src="img/condicionesComerciales.png" draggable="false" height="100px"/>
          </div>
          <div class="titulo">Condiciones </br> Comerciales</div>
        </div>
        <div class="container-categoria" id="linkReporteRubros">
          <div class="cuadros">
            <img class="icono" loading="lazy" src="img/reporteGastos.png" draggable="false"/>
          </div>
          <div class="titulo">Reporte de Gastos</div>
        </div>
        <div class="container-categoria"  >
          <div class="cuadros" id="linkReporteCxC">
            <img class="icono" loading="lazy" src="img/cuenta-por-cobrar.png" draggable="false" height="100px"/>
          </div>
          <div class="titulo">Reporte Cuentas x Cobrar</div>
        </div>
        <div class="container-categoria" id="linkFormList">
          <div class="cuadros">
            <img class="icono" loading="lazy" src="img/Formularios.png" draggable="false" height="100px"/>
          </div>
          <div class="titulo">Reporte de estatus de Solped</div>
        </div>
      </div>
      <div id="container-todo3" class="container-todo3" style="display: none;">
        <!-- Herramientas -->
        <div class="container-categoria" id="linkFormularioCondiciones">
          <div class="cuadros">
            <img class="icono" loading="lazy" src="img/solicitudDescuento.png" draggable="false"/>
          </div>
          <div class="titulo">Solicitud </br> de Descuento</div>
        </div>
        <div class="container-categoria" id="linkSolped">
          <div class="cuadros">
            <img class="icono" loading="lazy" src="img/solped.png" draggable="false" height="100px"/>
          </div>
          <div class="titulo">Solped</div>
        </div>
        
        <div class="container-categoria" id="linkRubro">
          <div class="cuadros">
            <img class="icono" loading="lazy" src="img/solicitudCambioPresupuesto.png" draggable="false" height="100px"/>
          </div>
          <div class="titulo">Solicitud Cambio</br> de Presupuesto</div>
        </div>
      </div>
    </section>
  </div>

  <script src="js/Menu.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const authToken = sessionStorage.getItem("authToken");
            if (!authToken) {
                redirectToLogin();
            } else {
                updateUsernameDisplay();
                updateLinks(authToken);
            }
        });

        function updateUsernameDisplay() {
    const name = sessionStorage.getItem("name");
    if (name) {
        document.getElementById('username').innerText = name;
    } else {
        console.error("No name found in sessionStorage");
        redirectToLogin();
    }
}

        function redirectToLogin() {
            window.location.href = 'index.html';
        }
        function updateLinks(token) {
    const links = {
        linkReporteCxC: `https://reportecxc.onrender.com?token=${token}`,
        linkFormList: `https://formularios-autorizados.vercel.app?token=${token}`,
        linkRubro: `https://formulariov3.onrender.com/rubro.html?token=${token}`,
        linkReporteRubros: `https://formulariov3.onrender.com/Reporte.html?token=${token}`,
        linkCalculadora: `https://condiciones.onrender.com?token=${token}`,
        linkSolped: `https://formulariov3.onrender.com/?token=${token}`,
        linkFormularioCondiciones: `https://condiciones.onrender.com/formulario?token=${token}`
    };

    Object.entries(links).forEach(([id, url]) => {
        const element = document.getElementById(id);
        if (element) {
            element.addEventListener('click', () => {
                window.location.href = url;
            });
        } else {
            console.warn(`Element with id "${id}" not found.`);
        }
    });
}
    </script>
</body>
</html>
